<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta name="google-site-verification" content="XwhPCxJ23A4vdp_xBFDnsoJelhGwCPELOda48Hw_GLQ"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title>Adjoint method 1 - Adjoint of operators | Geowanderer | Jingtao Min Homepage</title> <meta name="author" content="Jingtao Min"> <meta name="description" content="First tool for adjoint method - what is an adjoint?"> <meta name="keywords" content="jekyll, jekyll-theme, academic-website, portfolio-website"> <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha256-DF7Zhf293AJxJNTmh5zhoYYIMs2oXitRfBjY+9L//AY=" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/academicons@1.9.1/css/academicons.min.css" integrity="sha256-i1+4qU2G2860dGGIOJscdC30s9beBXjFfzjWLjBRsBg=" crossorigin="anonymous"> <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/github.css" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%E2%9A%9B%EF%B8%8F&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css"> <link rel="canonical" href="https://gentlemin.github.io/notes/adjoint_method_1_adjoints/"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/native.css" media="none" id="highlight_theme_dark"> <script src="/assets/js/theme.js"></script> <script src="/assets/js/dark_mode.js"></script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/">Geowanderer</a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">About</a> </li> <li class="nav-item "> <a class="nav-link" href="/blog/">Blog</a> </li> <li class="nav-item "> <a class="nav-link" href="/notes/">Notes</a> </li> <li class="nav-item "> <a class="nav-link" href="/projects/">Projects</a> </li> <li class="nav-item "> <a class="nav-link" href="/repositories/">Repos</a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">CV</a> </li> <li class="nav-item dropdown "> <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">More</a> <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown"> <a class="dropdown-item" href="/publications/">Publications</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/teaching/">Teaching</a> </div> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="fas fa-moon"></i> <i class="fas fa-sun"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">Adjoint method 1 - Adjoint of operators</h1> <p class="post-description">First tool for adjoint method - what is an adjoint?</p> </header> <article> <p>Adjoint method is a powerful method for computing Fréchet derivatives of functionals involving solutions to differential equations. It is commonly used in inverse problems, data assimilations, optimal controls and fields concerning PDE-constrained optimization. Typically, a set of adjoint equations is developed in addition to the original forward equation; the derivative is computed based on the solutions to both the original and the adjoint system.</p> <p>Although I have come across the adjoint method quite several times, first in seismology and full waveform inversion (FWI), then in electromagnetic induction sounding, and most recently in fluid dynamics and geodynamo problems, I feel that I never truly get the gist of it. A question that I often ask myself: if given an arbitrary set of PDEs, and an objective function involving the observables, will I be able to derive the adjoint equations and express the necessary Fréchet derivatives in terms of original and adjoint solutions? To this question, my answer has always been uncertain, inclined towards negative. I decide therefore that it is now time to develop some more systematic understanding of this method.</p> <p>The challenge is that most of the texts on this topic are buried within <em>actual</em> mathematical literature. One cannot truly understand adjoint method unless one is apt with functional analysis. Unfortunately, I have no formal background in this level of mathematics. What I try to do here is try to collect a self-contained compilation of tools and theories required to develop the adjoint method.</p> <h2 id="adjoint-of-operators">Adjoint of Operators</h2> <p>The reason why the adjoint method is called “adjoint” method is because the operators are moved to its adjoint in the process. In other words, the adjoint systems are just formed by the adjoint operators of the original operators.</p> <p>The prerequisite for defining the adjoint is an original operator on a Hilbert space. Let \(L\) be a linear operator on a Hilbert space \(\mathcal{H}\), with inner product \((f, g)\). The adjoint operator \(L^*\) is defined as the operator that fulfills the Lagrange’s identity</p> \[\langle f, Lg\rangle = \langle L^*f, g \rangle, \qquad \forall f, g \in \mathcal{H}\] <p>If \(L^* = L\), the operator is called <em>self-adjoint</em>.</p> <h3 id="finite-dimensional-hilbert-space-adjoint-of-matrices">Finite-dimensional Hilbert space: Adjoint of matrices</h3> <p>The adjoints of operators are very straightforward in finite dimensions, where the Hilbert space is a finite-dimensional complex vector space \(\mathbb{C}^n\), equipped with the inner product \(\langle u, v \rangle = u^\mathsf{H} v\). The linear transforms on this vector space is simply a matrix \(L\in \mathbb{C}^{n\times n}\), and</p> \[\langle u, Lv\rangle = u^\mathsf{H} Lv=(L^\mathsf{H} u)^\mathsf{H} v = \langle L^\mathsf{H} u, v\rangle \quad \Longrightarrow \quad L^* = L^\mathsf{H}\] <p>therefore the adjoint of a matrix is nothing but its conjugate transpose. When translated to the language of matrices, self-adjointness simply means <em>Hermitian</em> \(L^\mathsf{H} = L\). It follows that adjoint can be considered as a generalization of conjugate transposition to operators on arbitrary, esp. infinite dimensional, vector spaces.</p> <h3 id="general-second-order-differential-operator">General second-order differential operator</h3> <p>Consider a Hilbert space \(\mathcal{H}\) of twice differentiable functions defined on a domain in \(\mathbb{R}^n\), equipped with the the inner product</p> \[\langle f, g \rangle = \int_\Omega \overline{f(\mathbf{r})} \, g(\mathbf{r})\, d\mathbf{r}\] <p>The differential operator of second order operating on these functions takes the general form</p> \[L = \sum_{i,j} a_{ij} \partial_i \partial_j + \sum_{i} b_i \partial_i + c = \mathbf{A}: \nabla\nabla + \mathbf{b}\cdot \nabla + c\] <p>The inner product with this operator can be written as</p> \[\begin{aligned} \langle f,Lg \rangle &amp;= \sum_{i,j} \langle f, a_{ij}\partial_i\partial_j g\rangle + \sum_i \langle f, b_i\partial_i g\rangle + c\langle f,g\rangle \\ &amp;= \sum_{i,j} \int_\Omega \overline{f}\, a_{ij} \partial_i \partial_j g\, d\mathbf{r} + \sum_i \int_\Omega \overline{f} b_i \partial_i g\, d\mathbf{r} + c\int_\Omega \overline{f} g\, d\mathbf{r} \\ &amp;= \int_\Omega \overline{f}\mathbf{A}: \nabla\nabla g\, d\mathbf{r} + \int_\Omega \overline{f} \, \mathbf{b}\cdot \nabla g\, d\mathbf{r} + c\int_\Omega \overline{f} g\, d\mathbf{r} \end{aligned}\] <p>Note that using vector identities (or basic calculus on component form),</p> \[\begin{aligned} \overline{f} a_{ij} \partial_i \partial_j g &amp;= \partial_i \left(a_{ij}\overline{f} \partial_j g\right) - \partial_i(a_{ij} \overline{f}) \partial_j g \\ &amp;= \partial_i \left(a_{ij}\overline{f} \partial_j g\right) - \partial_j \left( \partial_i(a_{ij} \overline{f}) g \right) + g \partial_j\partial_i \left(a_{ij} \overline{f}\right) \\ \overline{f} \mathbf{A}: \nabla\nabla g &amp;= \nabla\cdot \left(\overline{f} \mathbf{A}\cdot \nabla g - g \nabla\cdot (\overline{f} \mathbf{A}) \right) + g \nabla\nabla : (\overline{f}\mathbf{A}) \\ \overline{f} b_i \partial_i g &amp;= \partial_i \left(b_i \overline{f}g\right) - g \partial_i \left(\overline{f} b_i\right) \\ \overline{f}\mathbf{b}\cdot \nabla g &amp;= \nabla\cdot \left(\overline{f} g \mathbf{b}\right) - g \nabla\cdot \left(\overline{f} \mathbf{b}\right) \end{aligned}\] <p>The linear operator on \(g\) can be moved to \(f\), although changed in form:</p> \[\begin{aligned} \langle f, Lg\rangle &amp;= \int_\Omega g \nabla\nabla : \left(\overline{f} \mathbf{A}\right) \, d\mathbf{r} - \int_\Omega g \nabla\cdot \left(\overline{f} \mathbf{b}\right)\, d\mathbf{r} + c\int_\Omega \overline{f} g \, d\mathbf{r} \\ &amp;+ \oint_{\partial \Omega} \left(\overline{f} \mathbf{A}\cdot \nabla g - g \nabla\cdot (\overline{f} \mathbf{A}) + g\overline{f}\mathbf{b}\right) \cdot d\mathbf{S} \\ &amp;= \int_\Omega \overline{\left(\nabla\nabla : (\overline{\mathbf{A}}f) - \nabla\cdot (\overline{\mathbf{b}} f) + \overline{c} f\right)} \, g\, d\mathbf{r} \\ &amp;+ \oint_{\partial \Omega} \left(\overline{f} \mathbf{A}\cdot \nabla g - g \nabla\cdot (\overline{f} \mathbf{A}) + g\overline{f}\mathbf{b}\right) \cdot d\mathbf{S} \\ \langle f, Lg\rangle &amp;= \langle L^* f, g\rangle + \oint_{\partial \Omega} \mathbf{T}\cdot d\mathbf{S} \end{aligned}\] <p>Therefore the adjoint \(L^*\) for the general second-order differential operator reads</p> \[L^* = \sum_{i,j} \partial_i \partial_j \overline{a}_{ij}^M - \sum_{i} \partial_i \overline{b}_i^M + \overline{c} = \nabla\nabla:\overline{\mathbf{A}}^M - \nabla\cdot \overline{\mathbf{b}}^M + \overline{c}.\] <p>Here the superscript \(M\) denotes a multiplication operator, as used in Backus. The necessary boundary condition for the Hilbert space is</p> \[\left(\overline{f} \mathbf{A}\cdot \nabla g - g \nabla\cdot (\overline{f} \mathbf{A}) + g\overline{f}\mathbf{b}\right)_{\partial \Omega} \cdot \hat{\mathbf{n}} = 0\] <h3 id="common-linear-differential-operators">Common linear differential operators</h3> <h4 id="laplacian">Laplacian</h4> <p>With the previous derivations, we can easily obtain the adjoint operators of common second-order differential operators. First, let us look at the <strong><em>Laplacian</em></strong> \(L = \nabla^2 = \mathbf{I}:\nabla\nabla\). The adjoint operator takes the form</p> \[L^* = \nabla \nabla:\mathbf{I}^M = \nabla^2 = L\] <p>Therefore the operator is self-adjoint, under the boundary condition</p> \[\left(\overline{f}\nabla g - g\nabla \overline{f}\right)\cdot \hat{\mathbf{n}} = \overline{f} \frac{\partial g}{\partial n} - g \frac{\partial \overline{f}}{\partial n} = 0.\] <p>For the Laplacian operator, any homogeneous <em>Robin-type boundary condition</em> with real coefficients \(\alpha f + \beta \partial_n f = 0\) for both \(f\) and \(g\) will satisfy the aforementioned condition.</p> <h4 id="wave-operator">Wave operator</h4> <p>The self-adjointness is not specific to Laplacian; it turns out any \(\mathbf{A} = Cst. \in \mathbb{R}^{n\times n}\) (the two other coefficients set to zero) will yield self-adjoint operators, given the appropriate boundary conditions. For instance, the wave operator, or d’Alembert operator</p> \[\square = \frac{1}{c^2} \frac{\partial^2}{\partial t^2} - \nabla^2\] <p>where \(\nabla^2\) is the Laplacian in the spatial dimensions, is a a second-order operator in the space-domain continuum. Introducing \(\nabla_{\mathbf{r},t} = \hat{\mathbf{t}} \partial_t + \hat{\mathbf{r}}\nabla\), we consider the operator as operating on a Hilbert space of functions defined on \((t, x_{i=1:N}) \in \mathbb{R}^{N+1}\)</p> \[\square = \frac{1}{c^2}\partial_t^2 - \partial_i \partial_i = \begin{pmatrix}1/c^2 &amp; \mathbf{0} \\ \mathbf{0} &amp; -\mathbf{I}_N\end{pmatrix} : \nabla_{\mathbf{r},t}\nabla_{\mathbf{r},t}\] <p>Its adjoint is again, itself, making the wave operator self-adjoint,</p> \[\square^* = \nabla_{\mathbf{r}, t} \nabla_{\mathbf{r}, t} : \begin{pmatrix}1/c^2 &amp; \mathbf{0} \\ \mathbf{0} &amp; -\mathbf{I}_N\end{pmatrix} = \frac{1}{c^2} \partial_t^2 - \nabla^2 = \square.\] <p>The boundary condition to be satisified</p> \[\overline{f} \hat{\mathbf{n}}\cdot \begin{pmatrix}1/c^2 &amp; \mathbf{0} \\ \mathbf{0} &amp; -\mathbf{I}_N \end{pmatrix} \cdot \nabla_{\mathbf{r}, t} g - g \nabla_{\mathbf{r},t}f \cdot \begin{pmatrix}1/c^2 &amp; \mathbf{0} \\ \mathbf{0} &amp; -\mathbf{I}_N\end{pmatrix} \cdot \hat{\mathbf{n}} = 0\] <p>This comprises both boundary conditions in time and in space. Let us further assume that the problem is defined on \([t_0, t_1] \times \Omega\), with \(\Omega \in \mathbb{R}^n\) is the spatial domain. At the temporal boundary \(\hat{\mathbf{n}} = \pm \hat{\mathbf{t}}\), we have</p> \[\left[\overline{f} \frac{\partial g}{\partial t} - g \frac{\partial \overline{f}}{\partial t}\right]_{t_0, t_1} = 0,\quad\] <p>and at the space boundary, the same boundary condition as for Laplacian applies</p> \[\overline{f} \frac{\partial g}{\partial n} - g \frac{\partial \overline{f}}{\partial n} = 0.\] <p>These two conditions correspond to the boundary conditions required in seismology to prove the theorem of source-receiver reciprocity, also called <strong><em>Betti’s theorem of reciprocity</em></strong> i.e. reciprocal property of Green’s function: the first can be satisfied with a “quiescent” past for the original wavefield \(g\) and a quiescent “future” for the adjoint field \(f\), and the second can be satisfied with either free-surface or no-slip boundary condition. <em>Final remark</em>: the same operator can also be expressed using the Minkowski metric, in which case \(\square\) is really just a Laplacian in Minkowski space.</p> <h4 id="operators-in-sturm-liouville-problems">Operators in Sturm-Liouville problems</h4> <p>The Sturm-Liouville problem is given by equation</p> \[\frac{d}{dx} \left[p(x) \frac{dy}{dx}\right] + q(x) y = \lambda \, r(x)y,\qquad x\in(a,b)\] <p>with some homogeneous boundary condition. The problem is a <em>generalized eigenvalue problem</em>, but can be easily converted to an ordinary eigenvalue problem given \(r(x)&gt;0\):</p> \[Ly=\lambda y,\qquad L = \frac{1}{r(x)}\frac{d}{dx}\left[p(x)\frac{dy}{dx}\right] + \frac{q(x)}{r(x)}\] <p>If we take \(p(x), q(x), r(x)\) real continuous functions, and \(p(x)\) has continuous derivative, and introduce the Hilbert space equipped with inner product</p> \[\langle f, g\rangle = \int_a^b f(x)g(x)\, r(x)\,dx,\] <p>then the adjoint can be developed:</p> \[\begin{aligned} \langle f, Lg\rangle &amp;= \int_a^b f\left[\frac{1}{r}\frac{d}{dx}\left(p\frac{dg}{dx}\right) + \frac{q}{r}g \right]r\, dx \\ &amp;= \int_a^b f\frac{d}{dx}\left(p\frac{dg}{dx}\right) \, dx + \int_a^b f q g \, dx \\ &amp;= \int_a^b \frac{d}{dx}\left(p\frac{df}{dx}\right) g\,dx + \int_a^b fqg\, dx + \left[p\left(f\frac{dg}{dx} - g\frac{df}{dx}\right)\right]_a^b \\ &amp;= \int_a^b \left[\frac{1}{r}\frac{d}{dx}\left(p\frac{df}{dx}\right) + \frac{q}{r}f \right]g \,r\, dx + \left[p\left(f\frac{dg}{dx} - g\frac{df}{dx}\right)\right]_a^b \\ &amp;= \langle Lf, g\rangle + \left[p\left(f\frac{dg}{dx} - g\frac{df}{dx}\right)\right]_a^b \end{aligned}\] <p>Once again whenever some (Neumann/Dirichlet/Robin) homogeneous boundary condition is given, the boundary term will vanish. The linear differential operator associated with Sturm-Liouville problems is therefore self-adjoint.</p> <h4 id="diffusion-operator">Diffusion operator</h4> <p>Finally, we look at a non-self-adjoint operator. The diffusion operator is given by</p> \[L = \frac{\partial}{\partial t} - \alpha \nabla^2\] <p>where \(\alpha\) is some diffusivity. As in wave operator, we can extend the \(N\) spatial dimensions into \(N+1\) dimensions, and write \((t, x_i=1:N)\) as the coordinate system. In this configuration, the operator corresponds to a second-order differential operator with</p> \[\mathbf{A} = \begin{pmatrix} 0 &amp; \\ &amp;-\alpha \mathbf{I} \end{pmatrix},\quad \mathbf{b} = \begin{pmatrix}1 \\ \mathbf{0} \end{pmatrix}.\] <p>Following the derived equation, the adjoint is given by</p> \[L^* = - \frac{\partial}{\partial t} -\alpha \nabla^2 \neq L\] <p>with temporal and spatial boundary conditions</p> \[\left(\overline{f} g\right)_{t_0, t_1} = 0,\qquad \left(\overline{f} \frac{\partial g}{\partial n} - g \frac{\partial \overline{f}}{\partial n}\right)_{\partial \Omega} = 0.\] <p>The diffusion operator is thus not self-adjoint.</p> </article> </div> </div> <footer class="fixed-bottom"> <div class="container mt-0"> © Copyright 2025 Jingtao Min. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. <a href="https://hits.sh/gentlemin.github.io_notes/adjoint_method_1_adjoints.md" rel="external nofollow noopener" target="_blank"><img alt="Hits" src="https://hits.sh/gentlemin.github.io_notes/adjoint_method_1_adjoints.md.svg?color=9277f0"></a> </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js" integrity="sha256-fgLAgv7fyCGopR/gBNq2iW3ZKIdqIcyshnUULC4vex8=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@4/imagesloaded.pkgd.min.js"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.8/dist/medium-zoom.min.js" integrity="sha256-7PhEpEWEW0XXQ0k6kQrPKwuoIomz8R8IYyuU1Qew4P8=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js"></script> <script defer src="/assets/js/common.js"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css" integrity="sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X" crossorigin="anonymous"> <script defer src="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.js" integrity="sha384-g7c+Jr9ZivxKLnZTDUhnkOnsh30B4H0rpLUpJ4jAIKs4fnJI+sEnkvrMWph2EDg4" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/contrib/auto-render.min.js" integrity="sha384-mll67QQFJfxn0IYznZYonOWZ644AWYC+Pt2cHqMaRhXVrursRwvLnLaebdGIlYNa" crossorigin="anonymous"></script> <script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{})});</script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>